function toggleLoadGIF(){var a=$("#load-gif");"none"==a.css("display")?a.css("display","block"):a.css("display","none")}var CURRENT_FOLDER,CURRENT_BOOKMARKS=[],MAX_BOOKMARKS=9,CURRENT_OFFSET;window.onload=function(){function a(a){for(var o="",e=0;e<a.length;e++)o+='<div class="col-1-3 mobile-col-1-3 card-min-width">\n    <div class="content">\n        <div class="card card--small" id="bookmark-card-'+a[e].id+'">\n            <div style="background-color:#DE2924" class="card__image"></div>\n            <a class="bookmark-link" id="bookmark-url-'+a[e].id+'" href="'+a[e].url+'"><h2 id="title-bookmark-'+a[e].id+'" class="card__title">'+a[e].title+'</h2></a>\n            <div class="card__action-bar">\n',o+="undefined"!=typeof a[e].star&&1==a[e].star?'                <a class="card__button" href="/bookmarks/'+a[e].id+'/unstar" id="star-bookmark-'+a[e].id+'"><i class="fa fa-star fa-lg"></i></a>\n':'                <a class="card__button" href="/bookmarks/'+a[e].id+'/star" id="star-bookmark-'+a[e].id+'"><i class="fa fa-star fa-lg fa-star-inactive"></i></a>\n',o+='                <a class="card__button" href="#editBookmark" id="edit-bookmark-'+a[e].id+'"><i class="fa fa-info-circle fa-lg"></i></a>\n                <a class="card__button" href="/bookmarks/delete/'+a[e].id+'" id="delete-bookmark-'+a[e].id+'"><i class="fa fa-trash-o fa-lg"></i></a>\n            </div>\n         </div>\n     </div>\n</div>\n';return o}function o(a,o){window.location.hash="warningModal",$("#warningTitle:first").text(a),$("#warningMessage").text(o)}function e(){if("starred"==CURRENT_FOLDER)var a="/bookmarks/getCount",o=1;else var a="/bookmarks/getCount/"+CURRENT_FOLDER,o=0;var e=$('#searchForm input[name="Search"]').val(),t=$('#orderByForm select[name="SortBy"]').val(),r={Search:e,SortBy:t,Star:o};$.ajax({type:"GET",async:!1,url:a,contentType:"application/json",dataType:"json",data:r,success:function(a){for(var r=Math.ceil(a.data.count/MAX_BOOKMARKS),n="",i=1;r>=i;i++)n+='<a href="/list/'+(1==o?"":CURRENT_FOLDER)+"?Search="+e+"&SortBy="+t+"&offset="+i+"&Star="+o+'"> '+i+" </a>";$("#pagination").html(n)}})}function t(){if("starred"==CURRENT_FOLDER)var e="/list",t=1;else var e="/list/"+CURRENT_FOLDER,t=0;var r=$('#searchForm input[name="Search"]').val(),n=$('#orderByForm select[name="SortBy"]').val(),i={folder_id:CURRENT_FOLDER,Search:r,SortBy:n,Star:t,offset:CURRENT_OFFSET};$.ajax({type:"GET",url:e,contentType:"application/json",dataType:"json",data:i,success:function(o){var e=o.data.bookmarks;CURRENT_BOOKMARKS=e;var t=a(e);$("#bookmarks").html(t)},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)}})}!function(){toggleLoadGIF(),$.ajax({cache:!1,type:"GET",url:"/list",contentType:"application/json",dataType:"json",data:"",success:function(a){CURRENT_BOOKMARKS=a.data.bookmarks,CURRENT_FOLDER="",CURRENT_OFFSET=1},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}})}(),$(".navbar-right a:nth-of-type(1)").on("click",function(){""!=CURRENT_FOLDER&&"starred"!=CURRENT_FOLDER?$('#addBookmarkForm select[name="folder_id"]').val(CURRENT_FOLDER):($("#addBookmarkForm option:selected").prop("selected",!1),$("#addBookmarkForm option:first").prop("selected","selected"))}),$("#addBookmarkForm").on("submit",function(t){t.preventDefault(),toggleLoadGIF();var r=$("#addBookmarkForm").attr("action"),n={title:$("#addBookmarkForm input[name='title']").val().trim(),url:$("#addBookmarkForm input[name='url']").val().trim(),description:$("#addBookmarkForm input[name='description']").val().trim(),folder_id:$("#addBookmarkForm select[name='folder_id']").val().trim()};return $.ajax({cache:!1,type:"POST",url:r,contentType:"application/json",dataType:"json",data:JSON.stringify(n),success:function(o){$("#addBookmarkForm")[0].reset(),window.location.hash="close";var t=o.data;if(CURRENT_BOOKMARKS.length<MAX_BOOKMARKS&&(CURRENT_FOLDER==t.folder_id||""==CURRENT_FOLDER)){var r=a([t]);$("#bookmarks").append(r),n.id=t.id,CURRENT_BOOKMARKS.push(n)}e()},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}}),!1}),$("#bookmarks").on("click",".card__action-bar a:nth-of-type(1)",function(a){a.preventDefault(),toggleLoadGIF();var r=$(this).attr("href"),n={bookmark_id:$(this).attr("id").split("-")[2]};$.ajax({type:"GET",url:r,contentType:"application/json",dataType:"json",data:n,success:function(a){var o=a.data;if("starred"==CURRENT_FOLDER)return t(),void e();var r=$("#star-bookmark-"+o.bookmark_id),n=$("#star-bookmark-"+o.bookmark_id+" > i");n.toggleClass("fa-star-inactive"),n.hasClass("fa-star-inactive")?r.attr("href","/bookmarks/"+o.bookmark_id+"/star"):r.attr("href","/bookmarks/"+o.bookmark_id+"/unstar")},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}})}),$("#bookmarks").on("click",".card__action-bar a:nth-of-type(3)",function(a){a.preventDefault(),window.location.hash="confirmDelete";var r=$(this).attr("id").split("-")[2];return $("#confirmDeleteForm").on("submit",function(a){return a.preventDefault(),toggleLoadGIF(),$.ajax({type:"GET",url:"/bookmarks/delete/"+r,dataType:"json",contentType:"application/json",success:function(a){window.location.hash="close",t(),e()},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}}),!1}),!1}),$("#addFolderForm").on("submit",function(a){a.preventDefault(),toggleLoadGIF();var e=$("#addFolderForm").attr("action"),t={name:$("#addFolderName").val().trim()};return $.ajax({cache:!1,type:"POST",url:e,contentType:"application/json",dataType:"json",data:JSON.stringify(t),success:function(a){$("#addFolderForm")[0].reset(),window.location.hash="close";var o=a.data;$("#folder-placeholder").css("display","none"),$("#folderList").append('<li><a id="folder-'+o.folder_id+'" href="/list/'+o.folder_id+'">'+o.folder_name+'</a>\n    <a class="pad-trash-icon" href="/folders/delete/'+o.folder_id+'" id="delete-folder-'+o.folder_id+'"><i class="fa fa-trash-o fa-lg"></i></a>\n</li>'),$('#addBookmarkForm select[name="folder_id"]').append('<option value="'+o.folder_id+'">'+o.folder_name+"</option>"),$('#editBookmarkForm select[name="folder_id"]').append('<option value="'+o.folder_id+'">'+o.folder_name+"</option>")},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}}),!1}),$("#folderList").on("click",".pad-trash-icon",function(a){a.preventDefault(),window.location.hash="confirmDelete";var e=$(this).attr("href"),t={folder_id:$(this).attr("id").split("-")[2]};$("#confirmDeleteForm").on("submit",function(a){return a.preventDefault(),window.location.hash="close",toggleLoadGIF(),$.ajax({type:"GET",url:e,contentType:"application/json",dataType:"json",data:t,success:function(a){var o=a.data;$("#delete-folder-"+o.folder_id).closest("li").remove(),$("#confirmDeleteForm").off("submit"),2==$("#folderList > li").length&&$("#folder-placeholder").css("display","block"),""==CURRENT_FOLDER||"starred"==CURRENT_FOLDER?$("#folder-"+CURRENT_FOLDER).click():CURRENT_FOLDER==o.folder_id&&$("#folder-").click(),$('#addBookmarkForm select[name="folder_id"] option[value='+o.folder_id+"]").remove(),$('#editBookmarkForm select[name="folder_id"] option[value='+o.folder_id+"]").remove()},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}}),!1})}),$("#folderList").on("click","li a:nth-of-type(1)",function(e){if(e.preventDefault(),toggleLoadGIF(),CURRENT_FOLDER=$(this).attr("id")?$(this).attr("id").split("-")[1]:"","starred"==CURRENT_FOLDER)var t="/list",r=1;else var t="/list/"+CURRENT_FOLDER,r=0;var n={folder_id:CURRENT_FOLDER,Star:r};$.ajax({type:"GET",url:t,contentType:"application/json",dataType:"json",data:n,success:function(o){$("#folderList li a").addClass("inactive-folder").removeClass("active-folder"),$("#folder-"+CURRENT_FOLDER).addClass("active-folder").removeClass("inactive-folder"),$('#searchForm input[name="Search"]').val(""),$('#orderByForm select[name="SortBy"]').val("Sort");var e=o.data.bookmarks;CURRENT_BOOKMARKS=e;var t=a(e);$("#bookmarks").html(t);for(var n=Math.ceil(o.data.count/MAX_BOOKMARKS),i="",s=1;n>=s;s++)i+='<a href= "/list'+(1==r?"":"/"+CURRENT_FOLDER)+"?&offset="+s+"&Star="+r+'">'+s+"</a>";$("#pagination").html(i)},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}})});var r=function(t){if(t.preventDefault(),toggleLoadGIF(),e(),"starred"==CURRENT_FOLDER)var r="/list",n=1;else var r="/list/"+CURRENT_FOLDER,n=0;var i=$('#searchForm input[name="Search"]').val(),s=$('#orderByForm select[name="SortBy"]').val(),l={folder_id:CURRENT_FOLDER,Search:i,SortBy:s,Star:n};return $.ajax({type:"GET",url:r,contentType:"application/json",dataType:"json",data:l,success:function(o){var e=o.data.bookmarks;CURRENT_BOOKMARKS=e;var t=a(e);$("#bookmarks").html(t)},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}}),!1};$("#searchButton").on("click",r),$('#orderByForm select[name="SortBy"]').on("change",r),$("#bookmarks").on("click",".card__action-bar a:nth-of-type(2)",function(a){for(var o=0;o<CURRENT_BOOKMARKS.length;o++){a.preventDefault();var e=$(this).attr("id").split("-")[2];if(e==CURRENT_BOOKMARKS[o].id)return $("#editBookmarkForm").attr("action","/bookmarks/update/"+CURRENT_BOOKMARKS[o].id),$('#editBookmarkForm input[name="title"]').val(CURRENT_BOOKMARKS[o].title),$('#editBookmarkForm input[name="url"]').val(CURRENT_BOOKMARKS[o].url),$('#editBookmarkForm input[name="description"]').val(CURRENT_BOOKMARKS[o].description),$('#editBookmarkForm select[name="folder_id"]').val(CURRENT_BOOKMARKS[o].folder_id),void(window.location.hash="editBookmark")}}),$("#editBookmarkForm").on("submit",function(a){a.preventDefault(),toggleLoadGIF();var r=$("#editBookmarkForm").attr("action").split("/")[3],n=$('#editBookmarkForm input[name="title"]').val(),i=$('#editBookmarkForm input[name="url"]').val(),s=$('#editBookmarkForm input[name="description"]').val(),l=$('#editBookmarkForm select[name="folder_id"]').val(),d={bookmark_id:r,title:n,url:i,description:s,folder_id:l};return $.ajax({type:"POST",url:"/bookmarks/update/"+r,data:JSON.stringify(d),dataType:"json",contentType:"application/json",success:function(a){window.location.hash="close";for(var o=a.data,r=0;r<CURRENT_BOOKMARKS.length;r++)if(o.bookmark_id==CURRENT_BOOKMARKS[r].id){if(o.folder_id==CURRENT_FOLDER||""==CURRENT_FOLDER||"starred"==CURRENT_FOLDER){CURRENT_BOOKMARKS[r].title=o.title,CURRENT_BOOKMARKS[r].url=o.url,CURRENT_BOOKMARKS[r].description=o.description,CURRENT_BOOKMARKS[r].folder_id=o.folder_id;break}return e(),void t()}$("#title-bookmark-"+o.bookmark_id).text(o.title),$("#bookmark-url-"+o.bookmark_id).attr("href",o.url)},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}}),!1}),$("#bookmarks").on("click",".bookmark-link",function(a){a.preventDefault(),toggleLoadGIF();var e="/bookmarks/last_visit",t={bookmark_id:$(this).attr("id").split("-")[1]},r=$(this).attr("href");$.ajax({type:"POST",url:e,contentType:"application/json",dataType:"json",data:JSON.stringify(t),success:function(a){a.data;window.location.href=r},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}})}),$("#pagination").on("click","a",function(e){if(e.preventDefault(),toggleLoadGIF(),CURRENT_OFFSET=$(this).text(),"starred"==CURRENT_FOLDER)var t=1,r="/list";else var t=0,r="/list/"+CURRENT_FOLDER;var n=$('#searchForm input[name="Search"]').val(),i=$('#orderByForm select[name="SortBy"]').val(),s=$(this).text(),l={folder_id:CURRENT_FOLDER,Search:n,SortBy:i,offset:s,Star:t};$.ajax({type:"GET",url:r,contentType:"application/json",dataType:"json",data:l,success:function(o){var e=o.data.bookmarks;CURRENT_BOOKMARKS=e;var t=a(e);$("#bookmarks").html(t)},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}})}),$("#resetPassword").on("submit",function(a){a.preventDefault(),toggleLoadGIF();var e="/passwordReset",t={password:document.getElementById("password").value,confirm_password:document.getElementById("confirm_password").value};$.ajax({cache:!1,type:"POST",url:e,contentType:"application/json",dataType:"json",data:JSON.stringify(t),success:function(a){$("#resetPassword")[0].reset(),window.location.hash="close",o("Success","Password reset successfully!")},error:function(a,e,t){var r=JSON.parse(a.responseText);o("Error",r.data)},complete:function(a,o){toggleLoadGIF()}})});var n=document.getElementById("menu"),i=document.getElementById("sidebar");document.getElementById("menu-icon");n.onclick=function(){var a=document.getElementById("right");"none"!==i.style.display?(i.style.display="none",a.style.width="100%",n.style.color="#FFF"):(i.style.display="block",a.style.width="82%",n.style.color="#FF9EAE")};var s=document.getElementById("add-bookmark"),l=document.getElementById("add-bookmark1"),d=document.getElementById("add-bookmark2"),c=document.getElementById("import-bookmark"),m=document.getElementById("add-bookmark-form"),f=document.getElementById("add-bookmark-form1"),p=document.getElementById("add-bookmark-form2"),k=document.getElementById("import-bookmark-form");s.onclick=function(){console.log(s),k.style.display="none",m.style.display="block",f.style.display="block",p.style.display="block",c.className="",s.className="",s.className="is-active"},l.onclick=function(){k.style.display="none",m.style.display="block",f.style.display="block",p.style.display="block",c.className="",s.className="",s.className="is-active"},d.onclick=function(){k.style.display="none",m.style.display="block",f.style.display="block",p.style.display="block",c.className="",s.className="",s.className="is-active"}};